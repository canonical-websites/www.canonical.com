base:
  image: ubuntu
  working_dir: /srv
  volumes:
    - .:/srv

npm:
  extends: {'service': 'base'}
  image: library/node
  command: npm install

sass:
  extends: {'service': 'base'}
  image: ubuntudesign/sass
  command: sass --debug-info --update static/css --force -E "UTF-8"

web:
  extends: {'service': 'base'}
  image: ubuntudesign/canonicalwebsite_web:master
  ports:
    - "8002:5000"

sass-watch:
  extends: {'service': 'sass'}
  command: sass --debug-info --watch static/css -E "UTF-8"
